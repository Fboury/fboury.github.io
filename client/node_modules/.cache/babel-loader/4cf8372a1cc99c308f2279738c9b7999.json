{"ast":null,"code":"var _jsxFileName = \"/Users/boubou/Documents/projets/FORMATIONS/React/testReactApi/client/src/components/Login/Login.js\";\nimport React, { useState } from \"react\";\nimport { Button, FormGroup, FormControl, FormLabel } from \"react-bootstrap\";\nimport userApi from \"../../API/userApi\";\nimport { useNavigate } from \"react-router-dom\";\nimport { commonConstants } from \"../../constants/commonConstants\";\nimport { useDispatch } from \"react-redux\";\nexport function Login() {\n  let navigate = useNavigate();\n  let dispatch = useDispatch();\n  const [formValues, setFormValues] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const {\n    email,\n    password\n  } = formValues;\n\n  const send = async () => {\n    try {\n      const response = await userApi.login(email, password);\n      dispatch({\n        type: commonConstants.NOTIFICATION_HANDLING,\n        payload: response\n      });\n      localStorage.setItem(\"token\", response.data.token);\n      localStorage.setItem(\"id\", response.data.id);\n      navigate(\"/\");\n    } catch (error) {\n      dispatch({\n        type: commonConstants.NOTIFICATION_HANDLING,\n        payload: error.response\n      });\n      console.log(\"test de l'erreur\", error.response);\n    }\n  };\n\n  const handleChange = event => {\n    setFormValues({ ...formValues,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"title-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, \"Se connecter\"), /*#__PURE__*/React.createElement(FormGroup, {\n    controlId: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FormLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(FormControl, {\n    autoFocus: true,\n    name: \"email\",\n    type: \"email\",\n    value: email,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(FormGroup, {\n    controlId: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FormLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, \"Mot de passe\"), /*#__PURE__*/React.createElement(FormControl, {\n    name: \"password\",\n    value: password,\n    onChange: handleChange,\n    type: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    onClick: send,\n    type: \"submit\",\n    className: \"my-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, \"Connexion\"));\n}","map":{"version":3,"sources":["/Users/boubou/Documents/projets/FORMATIONS/React/testReactApi/client/src/components/Login/Login.js"],"names":["React","useState","Button","FormGroup","FormControl","FormLabel","userApi","useNavigate","commonConstants","useDispatch","Login","navigate","dispatch","formValues","setFormValues","email","password","send","response","login","type","NOTIFICATION_HANDLING","payload","localStorage","setItem","data","token","id","error","console","log","handleChange","event","target","name","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Button, FormGroup, FormControl, FormLabel } from \"react-bootstrap\";\nimport userApi from \"../../API/userApi\";\nimport { useNavigate } from \"react-router-dom\";\nimport { commonConstants } from \"../../constants/commonConstants\";\nimport { useDispatch } from \"react-redux\";\n\nexport function Login() {\n  let navigate = useNavigate();\n  let dispatch = useDispatch();\n  const [formValues, setFormValues] = useState({ email: \"\", password: \"\" });\n  const { email, password } = formValues;\n\n  const send = async () => {\n    try {\n      const response = await userApi.login(email, password);\n      dispatch({\n        type: commonConstants.NOTIFICATION_HANDLING,\n        payload: response\n      });\n      localStorage.setItem(\"token\", response.data.token);\n      localStorage.setItem(\"id\", response.data.id);\n      navigate(\"/\");\n    } catch (error) {\n      dispatch({\n        type: commonConstants.NOTIFICATION_HANDLING,\n        payload: error.response\n      });\n\n      console.log(\"test de l'erreur\", error.response);\n    }\n  };\n  const handleChange = event => {\n    setFormValues({\n      ...formValues,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  return (\n    <div className=\"Login\">\n      <h2 className=\"title-page\">Se connecter</h2>\n      <FormGroup controlId=\"email\">\n        <FormLabel>Email</FormLabel>\n        <FormControl\n          autoFocus\n          name=\"email\"\n          type=\"email\"\n          value={email}\n          onChange={handleChange}\n        />\n      </FormGroup>\n      <FormGroup controlId=\"password\">\n        <FormLabel>Mot de passe</FormLabel>\n        <FormControl\n          name=\"password\"\n          value={password}\n          onChange={handleChange}\n          type=\"password\"\n        />\n      </FormGroup>\n      <Button onClick={send} type=\"submit\" className=\"my-3\">\n        Connexion\n      </Button>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}