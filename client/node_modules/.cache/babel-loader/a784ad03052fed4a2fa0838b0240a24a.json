{"ast":null,"code":"var _jsxFileName = \"/Users/boubou/Documents/projets/FORMATIONS/React/testReactApi/client/src/components/Commons/Navigation/Navigation.js\";\nimport React, { useEffect } from \"react\";\nimport { Navbar, Nav, Container, Button, ButtonGroup } from \"react-bootstrap\";\nimport logo from \"../../../logo.png\";\nimport userApi from \"../../../API/userApi\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getUser } from \"../../../redux/reducers/userReducer\";\nimport userActions from \"../../../redux/actions/userActions\";\nimport { commonConstants } from \"../../../constants/commonConstants\";\nexport function Navigation() {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const userConnected = userApi.isAuth();\n  const currentUser = useSelector(getUser);\n  const idUser = localStorage.getItem(\"id\");\n  useEffect(() => {\n    console.log(\"idUser\", idUser);\n    idUser && dispatch(userActions.getUser({\n      idUser\n    }));\n  }, [idUser]);\n  /**\n   * Gère le clic sur le bouton connexion si un user est déja connecté ou pas\n   */\n\n  const handleClickConnexion = async () => {\n    if (userConnected) {\n      userApi.logout();\n      console.log(\"current deco \", currentUser);\n      dispatch(userActions.clearUser());\n      dispatch({\n        type: commonConstants.NOTIFICATION_HANDLING,\n        payload: {\n          data: {\n            text: \"Déconnexion réussie\"\n          },\n          status: 200\n        }\n      });\n      navigate(\"/\");\n    } else {\n      navigate(\"/login\");\n    }\n  };\n\n  console.log(\"current \", currentUser);\n  console.log(\"localStorage \", localStorage);\n  const displayDashboardButton = userConnected && currentUser && (currentUser.droitsCreation || currentUser.droitsModification);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Navigation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    fixed: \"top\",\n    expand: \"lg\",\n    bg: \"light\",\n    variant: \"light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Navbar.Brand, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    className: \"imageLogo\",\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Nav, {\n    className: \"me-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Link, {\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, \"Accueil\"), /*#__PURE__*/React.createElement(Nav.Link, {\n    href: \"/circuits\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, \"Circuits\"), /*#__PURE__*/React.createElement(Nav.Link, {\n    href: \"/ecuries\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \"Ecurie\"), /*#__PURE__*/React.createElement(Nav.Link, {\n    href: \"/pilotes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, \"Pilote\")), /*#__PURE__*/React.createElement(ButtonGroup, {\n    vertical: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"mb-2\",\n    variant: \"outline-dark\",\n    size: \"sm\",\n    onClick: handleClickConnexion,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, userConnected ? \"Deconnexion\" : \"Se connecter\"), !userConnected && /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-dark\",\n    size: \"sm\",\n    onClick: () => navigate(\"/signup\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 15\n    }\n  }, \"S'inscrire\"), displayDashboardButton && /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-dark\",\n    size: \"sm\",\n    onClick: () => navigate(\"/dashboard\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }, \"Acc\\xE9der au dashboard\")), currentUser && Object.keys(currentUser).length !== 0 && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"pl-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, `Bonjour ${currentUser.nomUser}`))));\n}","map":{"version":3,"sources":["/Users/boubou/Documents/projets/FORMATIONS/React/testReactApi/client/src/components/Commons/Navigation/Navigation.js"],"names":["React","useEffect","Navbar","Nav","Container","Button","ButtonGroup","logo","userApi","useNavigate","useDispatch","useSelector","getUser","userActions","commonConstants","Navigation","navigate","dispatch","userConnected","isAuth","currentUser","idUser","localStorage","getItem","console","log","handleClickConnexion","logout","clearUser","type","NOTIFICATION_HANDLING","payload","data","text","status","displayDashboardButton","droitsCreation","droitsModification","Object","keys","length","nomUser"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { Navbar, Nav, Container, Button, ButtonGroup } from \"react-bootstrap\";\nimport logo from \"../../../logo.png\";\nimport userApi from \"../../../API/userApi\";\n\nimport { useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getUser } from \"../../../redux/reducers/userReducer\";\nimport userActions from \"../../../redux/actions/userActions\";\nimport { commonConstants } from \"../../../constants/commonConstants\";\n\nexport function Navigation() {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const userConnected = userApi.isAuth();\n  const currentUser = useSelector(getUser);\n  const idUser = localStorage.getItem(\"id\");\n\n  useEffect(() => {\n    console.log(\"idUser\", idUser);\n\n    idUser && dispatch(userActions.getUser({ idUser }));\n  }, [idUser]);\n  /**\n   * Gère le clic sur le bouton connexion si un user est déja connecté ou pas\n   */\n  const handleClickConnexion = async () => {\n    if (userConnected) {\n      userApi.logout();\n      console.log(\"current deco \", currentUser);\n      dispatch(userActions.clearUser());\n      dispatch({\n        type: commonConstants.NOTIFICATION_HANDLING,\n        payload: {\n          data: {\n            text: \"Déconnexion réussie\"\n          },\n          status: 200\n        }\n      });\n      navigate(\"/\");\n    } else {\n      navigate(\"/login\");\n    }\n  };\n  console.log(\"current \", currentUser);\n  console.log(\"localStorage \", localStorage);\n\n  const displayDashboardButton =\n    userConnected &&\n    currentUser &&\n    (currentUser.droitsCreation || currentUser.droitsModification);\n  return (\n    <div className=\"Navigation\">\n      <Navbar fixed=\"top\" expand=\"lg\" bg=\"light\" variant=\"light\">\n        <Container>\n          <Navbar.Brand>\n            <img src={logo} className=\"imageLogo\" alt=\"logo\" />\n          </Navbar.Brand>\n          <Nav className=\"me-auto\">\n            <Nav.Link href=\"/\">Accueil</Nav.Link>\n            <Nav.Link href=\"/circuits\">Circuits</Nav.Link>\n            <Nav.Link href=\"/ecuries\">Ecurie</Nav.Link>\n            <Nav.Link href=\"/pilotes\">Pilote</Nav.Link>\n          </Nav>\n          <ButtonGroup vertical>\n            <Button\n              className=\"mb-2\"\n              variant=\"outline-dark\"\n              size=\"sm\"\n              onClick={handleClickConnexion}\n            >\n              {userConnected ? \"Deconnexion\" : \"Se connecter\"}\n            </Button>\n            {!userConnected && (\n              <Button\n                variant=\"outline-dark\"\n                size=\"sm\"\n                onClick={() => navigate(\"/signup\")}\n              >\n                S'inscrire\n              </Button>\n            )}\n            {displayDashboardButton && (\n              <Button\n                variant=\"outline-dark\"\n                size=\"sm\"\n                onClick={() => navigate(\"/dashboard\")}\n              >\n                Accéder au dashboard\n              </Button>\n            )}\n          </ButtonGroup>\n          {currentUser && Object.keys(currentUser).length !== 0 && (\n            <p className=\"pl-4\">{`Bonjour ${currentUser.nomUser}`}</p>\n          )}\n        </Container>\n      </Navbar>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}